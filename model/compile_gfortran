# Compilation with gfortran

# Source files
# DO NOT use ~ to refer to HOME: use $HOME instead

SRC=" link_mod.f90 abstList_mod.f90 ran_mod.f90 class_krill.f90 part_def.f90 def_domain.f90 listKrill_mod.f90 OPA_GET_XY_LL.f90 ll_to_xy_NEMO.f90 par_particle.f90 zeros.f90 krill_motion.f90 utility_krill_mod.f90 netCDF_gestion.f90 main_model_parallel.f90"

# Path to netcdf libraries compiled with gfortran
# May need to export the path in the LD_LIBRARY_PATH environment variable
# export LD_LIBRARY_PATH=/usr/local/netcdf_gcc447/lib:/usr/local/netcdf_gfortran/lib

#INCDIR="-I/usr/local/netcdf_gcc447/include -I/usr/local/netcdf_gfortran/include"
INCDIR="-I/usr/local/netcdf/include"

#LIBDIR="-L/usr/local/netcdf_gcc447/lib -L/usr/local/netcdf_gfortran/lib"
LIBDIR="-L/usr/local/netcdf/lib64"

LIBS="-lnetcdf -lnetcdff"

# Pre-processing options: -DBACK = transport backward in time. Forward is default.

PP="-cpp"

# Optimization options

# Debugging
#OPT="-m64 -frange-check -fbounds-check -std=legacy -g -O0"
# Optimizing
OPT="-m64 -std=legacy -O3"

# Executable file

EXE=test_optimized.x

# Actual compilation

gfortran $PP $OPT $INCDIR $LIBDIR $SRC $LIBS -o $EXE

mv -i $EXE ../run
